{% extends '::base.html.twig' %}

{% block body %}

    <a href="{{ path('wcs_gesty_ecoles') }}" class="btn__retour">Retour</a>

    <div class="table-responsive">
        <table class="table">

            <tr>
                <td class="text-center welcome" colspan="5">Enfants inscrits - {{ ecoles.name }}</td>
            </tr>

            <tr>
                <td class="todayList text-center">Présence</td>
                <td class="todayList text-center">Nom</td>
                <td class="todayList text-center">Prénom</td>
                <td class="todayList text-center">Allergie(s)</td>
                <td class="todayList text-center">Régime sans porc</td>
            </tr>

            {% for eleve in eleves %}
            <tr>
                <td class="text-center"><input type="checkbox" class="eleve" name="eleve" value="{{ eleve.nom }}'-'{{ eleve.prenom }}'-'{{ eleve.dates }}" /></td>
                <td class="text-center">{{ eleve.nom |upper}}</td>
                <td class="text-center">{{ eleve.prenom }}</td>
                <td class="text-center">{{ eleve.allergie }}</td>
                <td class="text-center sansporc">
                    {% if eleve.regimeSansPorc == 1 %}
                        OUI
                    {% else %}
                        NON
                    {% endif %}
                </td>
            {% endfor %}
            </tr>
            <tr>
                <td class="text-center"><button class="ajout">Ajouter</button></td>
                <td class="text-center"><input name="nom" /></td>
                <td class="text-center"><input name="prenom" /></td>
                <td class="text-center"><input name="allergies" /></td>
                <td class="text-center"><input name="regimesansporc" /></td>
            </tr>
            <tr>
                <td colspan="5"><div><textarea class="commentaires" rows="2" placeholder="Commentaires..."></textarea></div>
                <button class="btn__envoyer">Envoyer</button></td>
            </tr>
        </table>
    </div>



    <div class="table-responsive">
        <table class="table">
            <tr>
                <td class="text-center">Nombre d'inscrits :</td>
                <td class="test text-center"></td>
            </tr>
            <tr>
                <td class="text-center">Nombre de Régime sans porc :</td>
                <td class="porc text-center"></td>
            </tr>
            <tr>
                <td class="text-center">Nombre d'enfants présents :</td>
                <td class="total text-center"></td>
            </tr>

        </table>
    </div>


    {% block javascripts %}
        <script src="{{ asset('bundles/wcscantine/js/jquery.min.js') }}"></script>
        <script src="{{ asset('bundles/wcscantine/js/bootstrap.min.js') }}"></script>
    {% endblock %}
    <script>
        var totalCheckboxes = $('input:checkbox');
        var totalSansPorc = $('.sansporc');
        var totalEleves = totalCheckboxes.length;
        window.onload = function () {
            $(".total")[0].innerHTML = 0;
            $(".test")[0].innerHTML = totalEleves;
            $(".porc")[0].innerHTML = $('.sansporc:contains("OUI")').length;
        };
        $( ".eleve" ).click(function() {
            var countCheckedCheckboxes = $('input:checkbox:checked').length;
            $(".total")[0].innerHTML = countCheckedCheckboxes;
        });
    </script>

{% endblock %}




